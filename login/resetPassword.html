<html xmlns="http://www.w3.org/1999/xhtml" class="login-pf" data-arp-injected="true" style="font-size: 20px;"><head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="robots" content="noindex, nofollow">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="js/jquery-3.4.1.min.js"></script>
    <script src="js/rem.js"></script>
    <link href="css2/main.css" rel="stylesheet">
    <link href="css2/login.css" rel="stylesheet">
    <title>Title</title>
</head>

<body>
<div id="main">
    <div class="flex w-full h-full">
        <div class="aside_box img_bg_center" id="aside_box">
            <img src="img/logo.png" class="product_logo" alt="">
            <div class="aside_title">
                电碳协同区块链公共服务平台
            </div>
            <div class="aside_subtitle">
                Electric-Carbon Collaborative Blockchain
            </div>
            <div class="aside_list">
                <!---
                <li>Feature 1</li>
                <li>Feature 2</li>
                <li>Feature 3</li>
                <li>Feature 4</li>
                ---->
            </div>
        </div>
        <div class="content_box flex justify-center items-center">
            <div class="login_box" style="position: relative">
                <div class="title">请设置密码</div>
                <form class="form_box" id="kc-passwd-update-form" action="TODO" method="post">
                    <div class="input_box flex flex-col" style="margin-top: .08rem;">
                        <input type="text" id="username" name="username" value="phone" autocomplete="username" readonly="readonly" style="display:none;">
                        <input type="password" id="password" name="password" autocomplete="current-password" style="display:none;">
                        <input type="password" name="password-new" placeholder="设置新密码">
                        <div class="error_text" id="password-new"></div>
                    </div>
                    <div class="input_box flex flex-col" style="margin-top: .08rem;">
                        <input type="password" name="password-confirm" placeholder="确认新密码">
                        <div class="error_text" id="password-confirm"></div>
                    </div>
                    <div class="btn_box active">
                        <button class=" w-full h-full noselect" onclick="return  validateForm(this.form)">
                            提交
                        </button>
                    </div>
                </form>
                <script>
                    let pattern = /^(?=.*\d)(?=.*[a-zA-Z])[a-zA-Z0-9]{8,16}$/
                    function validateForm(form) {
                        debugger;
                        if ($("[name='password-new']")[0].value == '') {
                            if ($(".password_err").length > 0)
                                document.querySelector('.password_err').style.display='none'
                            $("#password-new")[0].innerText = "请输入密码";
                            return false;
                        }
                        if (!pattern.test($("[name='password-new']")[0].value)) {
                            if ($(".password_err").length > 0)
                                document.querySelector('.password_err').style.display='none'
                            $("#password-new")[0].innerText = "密码必须包含字母和数字8到16位组成";
                            return false;
                        }
                        $("#password-new")[0].innerText = "";
                        if ($("[name='password-confirm']")[0].value == '') {
                            if ($(".password-confirm_err").length > 0)
                                document.querySelector('.password-confirm_err').style.display='none'
                            $("#password-confirm")[0].innerText = "请输入确认密码";
                            return false;
                        }
                        if ($("[name='password-confirm']")[0].value != $("[name='password-new']")[0].value) {
                            if ($(".password-confirm_err").length > 0)
                                document.querySelector('.password-confirm_err').style.display='none'
                            $("#password-confirm")[0].innerText = "密码不匹配";
                            return false;
                        }
                        $("#password-confirm")[0].innerText = "";
                        return true;
                    }
                </script>
            </div>
        </div>
    </div>
</div>
</body>
</html>